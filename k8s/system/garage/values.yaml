---
deuxfleurs-garage:
  monitoring:
    metrics:
      enabled: true


# ---
# app-template:
#   defaultPodOptions:
#     hostNetwork: true
#     dnsPolicy: ClusterFirstWithHostNet

#   controllers:
#     garage:
#       type: statefulset
#       replicas: 3
#       annotations:
#         reloader.stakater.com/auto: "true"
#       containers:
#         garage:
#           image:
#             repository: dxflrs/garage
#             tag: v2.1.0
#     garage-web:
#       annotations:
#         reloader.stakater.com/auto: "true"
#       containers:
#         garage-web:
#           nameOverride: garage-web
#           image:
#             repository: khairul169/garage-webui
#             tag: "1.1.0"
#           # env:
#             # API_BASE_URL: "http://garage.garage.svc:3903" # Garage admin API endpoint URL
#             # S3_ENDPOINT_URL: "http://garage.garage.svc:3900" # Garage S3 endpoint URL
#             # BASE_PATH: "https://garage-web.mdeleon.dev"
  
#   service:
#     garage:
#       controller: garage      
#       ports:        
#         api:
#           port: 3900
#         rpc:
#           port: 3901
#         http:
#           port: 3902
#         admin:
#           port: 3903
#     garage-web:
#       controller: garage-web      
#       ports:
#         http:
#           port: 3909

#   ingress:
#     garage-web:
#       enabled: true
#       annotations:
#         cert-manager.io/cluster-issuer: letsencrypt-prod
#         gethomepage.dev/name: Garage S3
#         gethomepage.dev/description: S3 Object Storage
#         gethomepage.dev/enabled: "true"
#         gethomepage.dev/group: Database Tools
#         gethomepage.dev/icon: sh-garage.png
#         gethomepage.dev/pod-selector: ""
#       hosts:
#         - host: &garage-web-ui garage-web.mdeleon.dev
#           paths:
#             - path: /
#               pathType: Prefix
#               service:
#                 identifier: garage-web
#                 port: http
#       tls:
#         - secretName: garage-web-tls-cert
#           hosts:
#             - *garage-web-ui

#     garage:
#       enabled: true
#       hosts:
#         - host: "*.s3.garage.mdeleon.dev"
#           paths:
#             - path: /
#               pathType: Prefix
#               service:
#                 identifier: garage
#                 port: api
#         - host: "*.web.garage.mdeleon.dev"
#           paths:
#             - path: /
#               pathType: Prefix
#               service:
#                 identifier: garage-web
#                 port: http

#   persistence:
#     config:
#       enabled: true
#       type: configMap
#       name: garage
#       defaultMode: 0555
#       advancedMounts:
#         garage:
#           garage:
#             - path: /etc/garage.toml
#               subPath: garage.toml
#               readOnly: true      
#         garage-web:
#           garage-web:
#             - path: /etc/garage.toml
#               subPath: garage.toml
#               readOnly: true
#     garage-data:
#       enabled: true
#       retain: true
#       type: persistentVolumeClaim
#       accessMode: ReadWriteOnce
#       size: 4Gi
#       advancedMounts:
#         garage:
#           garage:
#             - path: /var/lib/garage/data
#     garage-meta:
#       enabled: true
#       type: persistentVolumeClaim
#       accessMode: ReadWriteOnce
#       size: 1Gi
#       advancedMounts:
#         garage:
#           garage:
#             - path: /var/lib/garage/meta